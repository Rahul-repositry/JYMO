import React, { useEffect, useState } from "react";
import { Link, useLocation } from "react-router-dom";

const BottomNavigation = () => {
  const [activePath, setActivePath] = useState("/home");
  const location = useLocation();
  const [isAdminPage, setIsAdminPage] = useState(false);

  useEffect(() => {
    setActivePath(location.pathname);
    setIsAdminPage(location.pathname.includes("/admin"));
  }, [location]);

  const navItems = [
    {
      path: isAdminPage ? "/admin/home" : "/home",
      label: "Home",
      icon: HomeIcon,
    },
    {
      path: isAdminPage ? "/admin/jymqr" : "/calendar",
      label: isAdminPage ? "JymQR" : "Calendar",
      icon: isAdminPage ? JymQRIcon : CalendarIcon,
    },
    {
      path: isAdminPage ? "/admin/members" : "/scanner",
      label: isAdminPage ? "Users" : "Scanner",
      icon: isAdminPage ? UsersIcon : ScannerIcon,
    },
    {
      path: isAdminPage ? "/admin/profile" : "/profile",
      label: "Profile",
      icon: ProfileIcon,
    },
  ];

  return (
    <div
      className="fixed mx-auto max-w-screen-custom-md500 bottom-0 z-50 w-full h-16 bg-white border-t border-gray-200"
      style={{ transform: "translate(-50%,0)", left: "50%" }}
    >
      <div className="grid h-full max-w-lg grid-cols-4 mx-auto font-medium">
        {navItems.map(({ path, label, icon: Icon }) => (
          <Link key={path} to={path} className="flex place-content-center">
            <button
              type="button"
              onClick={() => setActivePath(path)}
              className={`inline-flex flex-col items-center justify-center px-5 w-full hover:bg-gray-50 dark:hover:bg-slate-50 group ${
                activePath === path
                  ? "text-darkBlack bg-slate-100"
                  : "text-gray-500"
              }`}
              aria-label={label}
            >
              <Icon isActive={activePath === path} />
            </button>
          </Link>
        ))}
      </div>
    </div>
  );
};

// Define your icon components here
const HomeIcon = ({ isActive }) => (
  <svg
    className={`w-7 h-7 mb-1 ${
      isActive ? "text-darkBlack" : "text-gray-500"
    } group-hover:text-darkBlack`}
    fill="currentColor"
    viewBox="0 0 20 20"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path>
  </svg>
);

const CalendarIcon = ({ isActive }) => (
  <svg
    className={`w-7 h-7 mb-1 ${
      isActive ? "text-darkBlack" : "text-gray-500"
    } group-hover:text-darkBlack`}
    fill="currentColor"
    viewBox="0 0 28 28"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <path d="M8.71874 2.8125C8.71874 2.58872 8.62985 2.37411 8.47161 2.21588C8.31338 2.05764 8.09877 1.96875 7.87499 1.96875C7.65122 1.96875 7.4366 2.05764 7.27837 2.21588C7.12014 2.37411 7.03124 2.58872 7.03124 2.8125V4.59C5.41124 4.71937 4.34924 5.03662 3.56849 5.8185C2.78662 6.59925 2.46937 7.66237 2.33887 9.28125H24.6611C24.5306 7.66125 24.2134 6.59925 23.4315 5.8185C22.6507 5.03662 21.5876 4.71937 19.9687 4.58887V2.8125C19.9687 2.58872 19.8798 2.37411 19.7216 2.21588C19.5634 2.05764 19.3488 1.96875 19.125 1.96875C18.9012 1.96875 18.6866 2.05764 18.5284 2.21588C18.3701 2.37411 18.2812 2.58872 18.2812 2.8125V4.51462C17.5331 4.5 16.6939 4.5 15.75 4.5H11.25C10.3061 4.5 9.46687 4.5 8.71874 4.51462V2.8125Z" />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M2.25 13.5C2.25 12.5561 2.25 11.7169 2.26463 10.9688H24.7354C24.75 11.7169 24.75 12.5561 24.75 13.5V15.75C24.75 19.9924 24.75 22.1141 23.4315 23.4315C22.113 24.7489 19.9924 24.75 15.75 24.75H11.25C7.00762 24.75 4.88587 24.75 3.5685 23.4315C2.25112 22.113 2.25 19.9924 2.25 15.75V13.5ZM19.125 15.75C19.4234 15.75 19.7095 15.6315 19.9205 15.4205C20.1315 15.2095 20.25 14.9234 20.25 14.625C20.25 14.3266 20.1315 14.0405 19.9205 13.8295C19.7095 13.6185 19.4234 13.5 19.125 13.5C18.8266 13.5 18.5405 13.6185 18.3295 13.8295C18.1185 14.0405 18 14.3266 18 14.625C18 14.9234 18.1185 15.2095 18.3295 15.4205C18.5405 15.6315 18.8266 15.75 19.125 15.75ZM19.125 20.25C19.4234 20.25 19.7095 20.1315 19.9205 19.9205C20.1315 19.7095 20.25 19.4234 20.25 19.125C20.25 18.8266 20.1315 18.5405 19.9205 18.3295C19.7095 18.1185 19.4234 18 19.125 18C18.8266 18 18.5405 18.1185 18.3295 18.3295C18.1185 18.5405 18 18.8266 18 19.125C18 19.4234 18.1185 19.7095 18.3295 19.9205C18.5405 20.1315 18.8266 20.25 19.125 20.25ZM14.625 14.625C14.625 14.9234 14.5065 15.2095 14.2955 15.4205C14.0845 15.6315 13.7984 15.75 13.5 15.75C13.2016 15.75 12.9155 15.6315 12.7045 15.4205C12.4935 15.2095 12.375 14.9234 12.375 14.625C12.375 14.3266 12.4935 14.0405 12.7045 13.8295C12.9155 13.6185 13.2016 13.5 13.5 13.5C13.7984 13.5 14.0845 13.6185 14.2955 13.8295C14.5065 14.0405 14.625 14.3266 14.625 14.625ZM14.625 19.125C14.625 19.4234 14.5065 19.7095 14.2955 19.9205C14.0845 20.1315 13.7984 20.25 13.5 20.25C13.2016 20.25 12.9155 20.1315 12.7045 19.9205C12.4935 19.7095 12.375 19.4234 12.375 19.125C12.375 18.8266 12.4935 18.5405 12.7045 18.3295C12.9155 18.1185 13.2016 18 13.5 18C13.7984 18 14.0845 18.1185 14.2955 18.3295C14.5065 18.5405 14.625 18.8266 14.625 19.125ZM7.875 15.75C8.17337 15.75 8.45952 15.6315 8.67049 15.4205C8.88147 15.2095 9 14.9234 9 14.625C9 14.3266 8.88147 14.0405 8.67049 13.8295C8.45952 13.6185 8.17337 13.5 7.875 13.5C7.57663 13.5 7.29048 13.6185 7.0795 13.8295C6.86853 14.0405 6.75 14.3266 6.75 14.625C6.75 14.9234 6.86853 15.2095 7.0795 15.4205C7.29048 15.6315 7.57663 15.75 7.875 15.75ZM7.875 20.25C8.17337 20.25 8.45952 20.1315 8.67049 19.9205C8.88147 19.7095 9 19.4234 9 19.125C9 18.8266 8.88147 18.5405 8.67049 18.3295C8.45952 18.1185 8.17337 18 7.875 18C7.57663 18 7.29048 18.1185 7.0795 18.3295C6.86853 18.5405 6.75 18.8266 6.75 19.125C6.75 19.4234 6.86853 19.7095 7.0795 19.9205C7.29048 20.1315 7.57663 20.25 7.875 20.25Z"
    />
  </svg>
);

const ScannerIcon = ({ isActive }) => (
  <svg
    className={`w-7 h-7 mb-1 ${
      isActive ? "text-darkBlack" : "text-gray-500"
    } group-hover:text-darkBlack`}
    fill="currentColor"
    viewBox="0 0 28 28"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <path d="M12.9734 16.8644V19.8919C12.974 20.3817 12.7802 20.8518 12.4346 21.1989C12.0891 21.546 11.6199 21.7418 11.13 21.7434H8.0967C7.60533 21.7434 7.13403 21.5484 6.78625 21.2013C6.43847 20.8542 6.24263 20.3833 6.2417 19.8919V16.8644C6.24417 16.3746 6.44088 15.9057 6.78866 15.5608C7.13644 15.2159 7.60687 15.023 8.0967 15.0226H11.13C11.6134 15.0226 12.0765 15.2141 12.4208 15.5534C12.7651 15.8927 12.9633 16.3529 12.9734 16.8362Z" />
    <path d="M22.7524 14.6898C22.5375 14.4749 22.2296 14.3621 21.9098 14.3621H14.8319C14.4012 14.3621 14.0057 14.1434 13.7723 13.7696C13.539 13.3959 13.539 12.9113 13.7723 12.5375C14.0057 12.1637 14.4012 11.945 14.8319 11.945H21.9098C22.2296 11.945 22.5375 11.8321 22.7524 11.6172C22.9673 11.4024 23.0802 11.0945 23.0802 10.7747V7.53184C23.0802 7.11156 22.7441 6.77547 22.3238 6.77547H17.9711C17.5519 6.77547 17.2158 7.11156 17.2158 7.53184V8.47489C17.2158 8.89517 16.8797 9.23126 16.4594 9.23126H11.373C10.9527 9.23126 10.6166 8.89517 10.6166 8.47489V7.53184C10.6166 7.11156 10.2805 6.77547 9.86027 6.77547H5.50756C5.08728 6.77547 4.75119 7.11156 4.75119 7.53184V10.7747C4.75119 11.1949 4.41509 11.531 3.99481 11.531C3.57453 11.531 3.23844 11.1949 3.23844 10.7747V7.53184C3.23844 6.23148 4.20719 5.26273 5.50756 5.26273H9.86027C10.4859 5.26273 11.0883 5.50953 11.5256 5.94685C11.9629 6.38417 12.2097 6.98658 12.2097 7.61216V8.47489C12.2097 9.10047 12.4565 9.70288 12.8939 10.1402C13.3312 10.5775 13.9336 10.8243 14.5592 10.8243H16.4594V7.53184C16.4594 6.23148 17.4282 5.26273 18.7285 5.26273H22.3238C23.0484 5.26273 23.6875 5.66396 24.0236 6.30008C24.3597 6.93621 24.3286 7.70162 24.0056 8.30181L22.7524 14.6898Z" />
  </svg>
);

// Define admin-specific icons
const JymQRIcon = ({ isActive }) => (
  <svg
    className={`w-9 h-9 mb-1 ${
      isActive ? "text-darkBlack" : "text-gray-500"
    } group-hover:text-darkBlack`}
    fill="currentColor"
    viewBox="0 0 28 28"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <path d="M16.04 23.081v-1.807h1.809v1.807H16.04zm-1.808-1.807V16.85h1.808v4.424h-1.808zm7.041-3.386v-2.847h1.807v2.847h-1.807zm-1.809-2.847v-1.808h1.809v1.808h-1.809zM8.808 16.85v-1.808h1.808v1.808H8.808zM7 15.041v-1.808h1.807l.001 1.808H7zm8.04-6.232V7h1.808v1.807l-1.808.002zM7.884 11.54h3.655V7.885H7.884v3.655zM7 11.617V7.808a.78.78 0 0 1 .807-.807h3.809a.78.78 0 0 1 .808.807v3.809a.78.78 0 0 1-.808.808H7.807A.78.78 0 0 1 7 11.617zm.884 10.58h3.809v-3.655H7.884v3.655zM7 22.274v-3.809a.78.78 0 0 1 .807-.808h3.963a.78.78 0 0 1 .807.808v3.809a.78.78 0 0 1-.807.807H7.807A.78.78 0 0 1 7 22.274zM18.541 11.54h3.655V7.885h-3.655v3.655zm-.885.077V7.808a.78.78 0 0 1 .808-.807h3.809a.78.78 0 0 1 .807.807v3.809a.78.78 0 0 1-.807.808h-3.809a.78.78 0 0 1-.808-.808zm1.808 11.464v-3.385h-1.808v-1.809h3.617v3.386h1.807v1.807h-3.616zM16.04 16.85v-1.808h3.424v1.808H16.04zm-3.616 0v-1.808h-1.807l-.001-1.808h5.424v1.808h-1.808v1.808h-1.807zm.807-4.424V8.808l1.808.001v1.807h1.808v1.808h-3.617zm-4.155-2.078v-1.27h1.27v1.27h-1.27zm.135 10.522v-1.27h1.27v1.27h-1.27zm10.523-10.523V9.079h1.269v1.27l-1.269-.002z" />
  </svg>
);

const UsersIcon = ({ isActive }) => (
  <svg
    className={`w-7 h-7 mb-1 ${
      isActive ? "text-darkBlack" : "text-gray-500"
    } group-hover:text-darkBlack`}
    fill="currentColor"
    viewBox="0 0 17 17"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <path d="M14,12.5C14,11.837 13.737,11.201 13.268,10.732C12.799,10.263 12.163,10 11.5,10C9.447,10 6.553,10 4.5,10C3.837,10 3.201,10.263 2.732,10.732C2.263,11.201 2,11.837 2,12.5C2,14.147 2,15 2,15L14,15C14,15 14,14.147 14,12.5ZM12,6L14,6C14.53,6 15.039,6.211 15.414,6.586C15.789,6.961 16,7.47 16,8L16,11L14.663,11C14.101,9.818 12.896,9 11.5,9L10.645,9C11.476,8.267 12,7.194 12,6ZM1.337,11L0,11C0,11 0,9.392 0,8C0,7.47 0.211,6.961 0.586,6.586C0.961,6.211 1.47,6 2,6L4,6C4,7.194 4.524,8.267 5.355,9L4.5,9C3.104,9 1.899,9.817 1.337,11ZM8,3C9.656,3 11,4.344 11,6C11,7.656 9.656,9 8,9C6.344,9 5,7.656 5,6C5,4.344 6.344,3 8,3ZM4.127,4.996C4.085,4.999 4.043,5 4,5C2.896,5 2,4.104 2,3C2,1.896 2.896,1 4,1C4.954,1 5.753,1.67 5.952,2.564C5.061,3.097 4.394,3.966 4.127,4.996ZM10.048,2.564C10.247,1.67 11.046,1 12,1C13.104,1 14,1.896 14,3C14,4.104 13.104,5 12,5C11.957,5 11.915,4.999 11.873,4.996C11.606,3.966 10.939,3.097 10.048,2.564Z" />
  </svg>
);

const ProfileIcon = ({ isActive }) => (
  <svg
    className={`w-7 h-7 mb-1 ${
      isActive ? "text-darkBlack" : "text-gray-500"
    } group-hover:text-darkBlack`}
    fill="currentColor"
    viewBox="0 0 20 20"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <path d="M10 2a4 4 0 100 8 4 4 0 000-8zm0 10c-5.33 0-8 2.67-8 4v2h16v-2c0-1.33-2.67-4-8-4z" />
  </svg>
);

export default BottomNavigation;
