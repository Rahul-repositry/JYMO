import React, { useEffect, useState } from "react";
import { Link, useLocation } from "react-router-dom";

const BottomNavigation = () => {
  const [activePath, setActivePath] = useState("/home");
  const location = useLocation();
  const [isAdminPage, setIsAdminPage] = useState(false);

  useEffect(() => {
    setActivePath(location.pathname);
    setIsAdminPage(location.pathname.includes("/admin"));
  }, [location]);

  const navItems = [
    {
      path: isAdminPage ? "/admin/home" : "/home",
      label: "Home",
      icon: HomeIcon,
    },
    {
      path: isAdminPage ? "/admin/jymqr" : "/calendar",
      label: isAdminPage ? "JymQR" : "Calendar",
      icon: isAdminPage ? JymQRIcon : CalendarIcon,
    },
    {
      path: isAdminPage ? "/admin/scanner" : undefined,
      label: isAdminPage ? "Scanner" : undefined,
      icon: isAdminPage ? ScannerIcon : undefined,
    },
    {
      path: isAdminPage ? "/admin/members" : "/scanner",
      label: isAdminPage ? "Users" : "Scanner",
      icon: isAdminPage ? UsersIcon : ScannerIcon,
    },

    {
      path: isAdminPage ? "/admin/profile" : "/profile",
      label: "Profile",
      icon: ProfileIcon,
    },
  ];

  return (
    <div
      className="fixed mx-auto max-w-screen-custom-md500 bottom-0 z-50 w-full h-16 bg-white border-t border-gray-200"
      style={{ transform: "translate(-50%,0)", left: "50%" }}
    >
      <div className="grid h-full max-w-lg grid-cols-5 mx-auto font-medium">
        {navItems.map(({ path, label, icon: Icon }) => {
          if (path) {
            return (
              <Link key={path} to={path} className="flex place-content-center">
                <button
                  type="button"
                  onClick={() => setActivePath(path)}
                  className={`inline-flex flex-col items-center justify-center px-5 w-full hover:bg-gray-50 dark:hover:bg-slate-50 group ${
                    activePath === path
                      ? "text-darkBlack bg-slate-100"
                      : "text-gray-500"
                  }`}
                  aria-label={label}
                >
                  <Icon isActive={activePath === path} />
                </button>
              </Link>
            );
          }
        })}
      </div>
    </div>
  );
};

// Define your icon components here
const HomeIcon = ({ isActive }) => (
  <svg
    className={`w-7 h-7 mb-1 ${
      isActive ? "text-darkBlack" : "text-gray-500"
    } group-hover:text-darkBlack`}
    fill="currentColor"
    viewBox="0 0 20 20"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path>
  </svg>
);

const CalendarIcon = ({ isActive }) => (
  <svg
    className={`w-7 h-7 mb-1 ${
      isActive ? "text-darkBlack" : "text-gray-500"
    } group-hover:text-darkBlack`}
    fill="currentColor"
    viewBox="0 0 28 28"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <path d="M8.71874 2.8125C8.71874 2.58872 8.62985 2.37411 8.47161 2.21588C8.31338 2.05764 8.09877 1.96875 7.87499 1.96875C7.65122 1.96875 7.4366 2.05764 7.27837 2.21588C7.12014 2.37411 7.03124 2.58872 7.03124 2.8125V4.59C5.41124 4.71937 4.34924 5.03662 3.56849 5.8185C2.78662 6.59925 2.46937 7.66237 2.33887 9.28125H24.6611C24.5306 7.66125 24.2134 6.59925 23.4315 5.8185C22.6507 5.03662 21.5876 4.71937 19.9687 4.58887V2.8125C19.9687 2.58872 19.8798 2.37411 19.7216 2.21588C19.5634 2.05764 19.3488 1.96875 19.125 1.96875C18.9012 1.96875 18.6866 2.05764 18.5284 2.21588C18.3701 2.37411 18.2812 2.58872 18.2812 2.8125V4.51462C17.5331 4.5 16.6939 4.5 15.75 4.5H11.25C10.3061 4.5 9.46687 4.5 8.71874 4.51462V2.8125Z" />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M2.25 13.5C2.25 12.5561 2.25 11.7169 2.26463 10.9688H24.7354C24.75 11.7169 24.75 12.5561 24.75 13.5V15.75C24.75 19.9924 24.75 22.1141 23.4315 23.4315C22.113 24.7489 19.9924 24.75 15.75 24.75H11.25C7.00762 24.75 4.88587 24.75 3.5685 23.4315C2.25112 22.113 2.25 19.9924 2.25 15.75V13.5ZM19.125 15.75C19.4234 15.75 19.7095 15.6315 19.9205 15.4205C20.1315 15.2095 20.25 14.9234 20.25 14.625C20.25 14.3266 20.1315 14.0405 19.9205 13.8295C19.7095 13.6185 19.4234 13.5 19.125 13.5C18.8266 13.5 18.5405 13.6185 18.3295 13.8295C18.1185 14.0405 18 14.3266 18 14.625C18 14.9234 18.1185 15.2095 18.3295 15.4205C18.5405 15.6315 18.8266 15.75 19.125 15.75ZM19.125 20.25C19.4234 20.25 19.7095 20.1315 19.9205 19.9205C20.1315 19.7095 20.25 19.4234 20.25 19.125C20.25 18.8266 20.1315 18.5405 19.9205 18.3295C19.7095 18.1185 19.4234 18 19.125 18C18.8266 18 18.5405 18.1185 18.3295 18.3295C18.1185 18.5405 18 18.8266 18 19.125C18 19.4234 18.1185 19.7095 18.3295 19.9205C18.5405 20.1315 18.8266 20.25 19.125 20.25ZM14.625 14.625C14.625 14.9234 14.5065 15.2095 14.2955 15.4205C14.0845 15.6315 13.7984 15.75 13.5 15.75C13.2016 15.75 12.9155 15.6315 12.7045 15.4205C12.4935 15.2095 12.375 14.9234 12.375 14.625C12.375 14.3266 12.4935 14.0405 12.7045 13.8295C12.9155 13.6185 13.2016 13.5 13.5 13.5C13.7984 13.5 14.0845 13.6185 14.2955 13.8295C14.5065 14.0405 14.625 14.3266 14.625 14.625ZM14.625 19.125C14.625 19.4234 14.5065 19.7095 14.2955 19.9205C14.0845 20.1315 13.7984 20.25 13.5 20.25C13.2016 20.25 12.9155 20.1315 12.7045 19.9205C12.4935 19.7095 12.375 19.4234 12.375 19.125C12.375 18.8266 12.4935 18.5405 12.7045 18.3295C12.9155 18.1185 13.2016 18 13.5 18C13.7984 18 14.0845 18.1185 14.2955 18.3295C14.5065 18.5405 14.625 18.8266 14.625 19.125ZM7.875 15.75C8.17337 15.75 8.45952 15.6315 8.67049 15.4205C8.88147 15.2095 9 14.9234 9 14.625C9 14.3266 8.88147 14.0405 8.67049 13.8295C8.45952 13.6185 8.17337 13.5 7.875 13.5C7.57663 13.5 7.29048 13.6185 7.0795 13.8295C6.86853 14.0405 6.75 14.3266 6.75 14.625C6.75 14.9234 6.86853 15.2095 7.0795 15.4205C7.29048 15.6315 7.57663 15.75 7.875 15.75ZM7.875 20.25C8.17337 20.25 8.45952 20.1315 8.67049 19.9205C8.88147 19.7095 9 19.4234 9 19.125C9 18.8266 8.88147 18.5405 8.67049 18.3295C8.45952 18.1185 8.17337 18 7.875 18C7.57663 18 7.29048 18.1185 7.0795 18.3295C6.86853 18.5405 6.75 18.8266 6.75 19.125C6.75 19.4234 6.86853 19.7095 7.0795 19.9205C7.29048 20.1315 7.57663 20.25 7.875 20.25Z"
    />
  </svg>
);

const ScannerIcon = ({ isActive }) => (
  <svg
    className={`w-7 h-7 mb-1 ${
      isActive ? "text-darkBlack" : "text-gray-500"
    } group-hover:text-darkBlack`}
    fill="currentColor"
    viewBox="0 0 28 28"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <path d="M12.9734 8.12022V11.1477C12.9813 11.5165 12.8778 11.879 12.6763 12.1879C12.4748 12.4968 12.1847 12.7377 11.844 12.8791C11.6178 12.9733 11.3751 13.0221 11.13 13.0226H8.0967C7.60734 13.0226 7.1378 12.8292 6.79035 12.4846C6.4429 12.14 6.2457 11.6721 6.2417 11.1827V8.15522C6.24139 7.9117 6.28919 7.67051 6.38234 7.44551C6.4755 7.22051 6.61218 7.01612 6.78454 6.84409C6.9569 6.67205 7.16155 6.53575 7.38672 6.44302C7.6119 6.35029 7.85318 6.30295 8.0967 6.30372H11.13C11.6134 6.30666 12.0765 6.49815 12.4208 6.83742C12.7651 7.1767 12.9633 7.63696 12.9734 8.12022ZM12.9734 16.8644V19.8919C12.974 20.3817 12.7802 20.8518 12.4346 21.1989C12.0891 21.546 11.6199 21.7418 11.13 21.7434H8.0967C7.60533 21.7434 7.13403 21.5484 6.78625 21.2013C6.43847 20.8542 6.24263 20.3833 6.2417 19.8919V16.8644C6.24417 16.3746 6.44088 15.9057 6.78866 15.5608C7.13644 15.2159 7.60687 15.023 8.0967 15.0246H11.13C11.6183 15.0246 12.0866 15.2183 12.4322 15.5632C12.7778 15.9082 12.9724 16.3761 12.9734 16.8644ZM21.77 8.12022V11.1477C21.777 11.6336 21.5924 12.1027 21.2562 12.4536C20.9199 12.8044 20.4591 13.0088 19.9734 13.0226H16.9517C16.4623 13.0226 15.9928 12.8292 15.6454 12.4846C15.2979 12.14 15.1007 11.6721 15.0967 11.1827V8.15522C15.0964 7.9117 15.1442 7.67051 15.2373 7.44551C15.3305 7.22051 15.4672 7.01612 15.6395 6.84409C15.8119 6.67205 16.0165 6.53575 16.2417 6.44302C16.4669 6.35029 16.7082 6.30295 16.9517 6.30372H19.9734C20.4486 6.31857 20.8999 6.51532 21.2343 6.85335C21.5686 7.19138 21.7604 7.64488 21.77 8.12022ZM21.77 16.8877V19.9152C21.7708 20.3971 21.5835 20.8602 21.2479 21.2061C20.9124 21.5519 20.455 21.753 19.9734 21.7667H16.9517C16.4603 21.7667 15.989 21.5718 15.6413 21.2246C15.2935 20.8775 15.0976 20.4066 15.0967 19.9152V16.8877C15.0995 16.398 15.2963 15.9293 15.644 15.5845C15.9917 15.2396 16.462 15.0466 16.9517 15.0479H19.9734C20.4526 15.0629 20.9073 15.2629 21.2423 15.606C21.5772 15.949 21.7664 16.4083 21.77 16.8877Z" />
    <path d="M24.7919 11.3105C24.5609 11.3075 24.3403 11.2145 24.1769 11.0513C24.0135 10.8881 23.9202 10.6676 23.9169 10.4367V6.83867C23.9252 6.47411 23.8592 6.11166 23.7228 5.77347C23.5864 5.43527 23.3825 5.12843 23.1235 4.87167C22.611 4.36482 21.9194 4.08023 21.1985 4.07951H17.6402C17.4085 4.07951 17.1863 3.98764 17.0223 3.82405C16.8583 3.66046 16.7658 3.4385 16.7652 3.20684C16.7655 2.97498 16.8578 2.75272 17.0219 2.58888C17.186 2.42503 17.4083 2.33301 17.6402 2.33301H21.2335C22.4158 2.3628 23.5389 2.85645 24.3602 3.70734C24.7757 4.1207 25.1052 4.61234 25.3294 5.15383C25.5537 5.69532 25.6684 6.27591 25.6669 6.86201V10.46C25.6605 10.6878 25.5655 10.9041 25.4021 11.0629C25.2387 11.2218 25.0198 11.3106 24.7919 11.3105ZM21.1985 25.6663H17.6402C17.4085 25.6663 17.1863 25.5745 17.0223 25.4109C16.8583 25.2473 16.7658 25.0253 16.7652 24.7937C16.7655 24.5618 16.8578 24.3396 17.0219 24.1757C17.186 24.0119 17.4083 23.9198 17.6402 23.9198H21.2335C21.7716 23.9155 22.2961 23.751 22.7402 23.4472C23.1843 23.1434 23.5277 22.7141 23.7267 22.2142C23.8587 21.883 23.9233 21.5288 23.9169 21.1723V17.6093C23.9172 17.3775 24.0095 17.1552 24.1736 16.9914C24.3376 16.8275 24.56 16.7355 24.7919 16.7355C25.0237 16.7355 25.2461 16.8275 25.4102 16.9914C25.5742 17.1552 25.6666 17.3775 25.6669 17.6093V21.1723C25.6691 22.0557 25.408 22.9197 24.917 23.6541C24.4259 24.3884 23.7272 24.9598 22.91 25.2953C22.3675 25.5182 21.7854 25.6337 21.1985 25.6313V25.6663ZM10.4069 25.6663H6.81354C6.22356 25.6659 5.63945 25.5493 5.09456 25.3231C4.54967 25.0969 4.05468 24.7655 3.63787 24.348C3.22197 23.9309 2.89262 23.4358 2.66877 22.891C2.44492 22.3462 2.331 21.7625 2.33354 21.1735V17.6105C2.33385 17.3786 2.42617 17.1564 2.59023 16.9925C2.75429 16.8287 2.97668 16.7367 3.20854 16.7367C3.4404 16.7367 3.66278 16.8287 3.82684 16.9925C3.9909 17.1564 4.08323 17.3786 4.08354 17.6105V21.1735C4.08632 21.8951 4.37539 22.5861 4.88727 23.0946C5.39914 23.6032 6.09196 23.8879 6.81354 23.886H10.4069C10.6387 23.886 10.8611 23.978 11.0252 24.1419C11.1892 24.3057 11.2816 24.528 11.2819 24.7598C11.282 24.8747 11.2595 24.9884 11.2155 25.0945C11.1716 25.2006 11.1071 25.297 11.0258 25.3781C10.9445 25.4592 10.8479 25.5234 10.7417 25.5671C10.6355 25.6107 10.5217 25.633 10.4069 25.6325V25.6663ZM3.20854 11.3105C2.97761 11.3075 2.75697 11.2145 2.59356 11.0513C2.43015 10.8881 2.33686 10.6676 2.33354 10.4367V6.83867C2.33663 5.66292 2.80665 4.53655 3.6402 3.70734C4.48156 2.87371 5.61746 2.4051 6.80187 2.40301H10.3952C10.6271 2.40301 10.8494 2.49503 11.0135 2.65888C11.1776 2.82272 11.2699 3.04498 11.2702 3.27684C11.2696 3.5085 11.1771 3.73046 11.0131 3.89405C10.8491 4.05764 10.6269 4.14951 10.3952 4.14951H6.80187C6.0802 4.14734 5.3872 4.43186 4.87526 4.94052C4.36332 5.44918 4.07434 6.14033 4.07187 6.86201V10.46C4.06557 10.6858 3.97219 10.9004 3.81128 11.0589C3.65037 11.2174 3.43439 11.3076 3.20854 11.3105Z" />
  </svg>
);

// Define admin-specific icons
const JymQRIcon = ({ isActive }) => (
  <svg
    className={`w-9 h-9 mb-1 ${
      isActive ? "text-darkBlack" : "text-gray-500"
    } group-hover:text-darkBlack`}
    fill="currentColor"
    viewBox="0 0 28 28"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <path d="M16.04 23.081v-1.807h1.809v1.807H16.04zm-1.808-1.807V16.85h1.808v4.424h-1.808zm7.041-3.386v-2.847h1.807v2.847h-1.807zm-1.809-2.847v-1.808h1.809v1.808h-1.809zM8.808 16.85v-1.808h1.808v1.808H8.808zM7 15.041v-1.808h1.807l.001 1.808H7zm8.04-6.232V7h1.808v1.807l-1.808.002zM7.884 11.54h3.655V7.885H7.884v3.655zM7 11.617V7.808a.78.78 0 0 1 .807-.807h3.809a.78.78 0 0 1 .808.807v3.809a.78.78 0 0 1-.808.808H7.807A.78.78 0 0 1 7 11.617zm.884 10.58h3.809v-3.655H7.884v3.655zM7 22.274v-3.809a.78.78 0 0 1 .807-.808h3.963a.78.78 0 0 1 .807.808v3.809a.78.78 0 0 1-.807.807H7.807A.78.78 0 0 1 7 22.274zM18.541 11.54h3.655V7.885h-3.655v3.655zm-.885.077V7.808a.78.78 0 0 1 .808-.807h3.809a.78.78 0 0 1 .807.807v3.809a.78.78 0 0 1-.807.808h-3.809a.78.78 0 0 1-.808-.808zm1.808 11.464v-3.385h-1.808v-1.809h3.617v3.386h1.807v1.807h-3.616zM16.04 16.85v-1.808h3.424v1.808H16.04zm-3.616 0v-1.808h-1.807l-.001-1.808h5.424v1.808h-1.808v1.808h-1.807zm.807-4.424V8.808l1.808.001v1.807h1.808v1.808h-3.617zm-4.155-2.078v-1.27h1.27v1.27h-1.27zm.135 10.522v-1.27h1.27v1.27h-1.27zm10.523-10.523V9.079h1.269v1.27l-1.269-.002z" />
  </svg>
);

const UsersIcon = ({ isActive }) => (
  <svg
    className={`w-7 h-7 mb-1 ${
      isActive ? "text-darkBlack" : "text-gray-500"
    } group-hover:text-darkBlack`}
    fill="currentColor"
    viewBox="0 0 17 17"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <path d="M14,12.5C14,11.837 13.737,11.201 13.268,10.732C12.799,10.263 12.163,10 11.5,10C9.447,10 6.553,10 4.5,10C3.837,10 3.201,10.263 2.732,10.732C2.263,11.201 2,11.837 2,12.5C2,14.147 2,15 2,15L14,15C14,15 14,14.147 14,12.5ZM12,6L14,6C14.53,6 15.039,6.211 15.414,6.586C15.789,6.961 16,7.47 16,8L16,11L14.663,11C14.101,9.818 12.896,9 11.5,9L10.645,9C11.476,8.267 12,7.194 12,6ZM1.337,11L0,11C0,11 0,9.392 0,8C0,7.47 0.211,6.961 0.586,6.586C0.961,6.211 1.47,6 2,6L4,6C4,7.194 4.524,8.267 5.355,9L4.5,9C3.104,9 1.899,9.817 1.337,11ZM8,3C9.656,3 11,4.344 11,6C11,7.656 9.656,9 8,9C6.344,9 5,7.656 5,6C5,4.344 6.344,3 8,3ZM4.127,4.996C4.085,4.999 4.043,5 4,5C2.896,5 2,4.104 2,3C2,1.896 2.896,1 4,1C4.954,1 5.753,1.67 5.952,2.564C5.061,3.097 4.394,3.966 4.127,4.996ZM10.048,2.564C10.247,1.67 11.046,1 12,1C13.104,1 14,1.896 14,3C14,4.104 13.104,5 12,5C11.957,5 11.915,4.999 11.873,4.996C11.606,3.966 10.939,3.097 10.048,2.564Z" />
  </svg>
);

const ProfileIcon = ({ isActive }) => (
  <svg
    className={`w-7 h-7 mb-1 ${
      isActive ? "text-darkBlack" : "text-gray-500"
    } group-hover:text-darkBlack`}
    fill="currentColor"
    viewBox="0 0 20 20"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <path d="M10 2a4 4 0 100 8 4 4 0 000-8zm0 10c-5.33 0-8 2.67-8 4v2h16v-2c0-1.33-2.67-4-8-4z" />
  </svg>
);

export default BottomNavigation;
